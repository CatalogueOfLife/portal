
<#--
Freemarker template with the following variables:
 releaseKey - the dataset key of the release
 source - dataset object for the source
 info - TaxonInfo object
 parent - SimpleName instance for the taxons parent
-->

<#assign _title>${info.taxon.getLabel()} | COL</#assign>
<#assign _description>${info.taxon.label} in the Catalogue of Life<#if source??> based on ${source.title!""}</#if></#assign>

<meta name="title" content="${_title}" />
<meta name="description" content="${_description}" />
<meta property="og:title" content="${_title}" />
<meta property="og:url" content="{{ site.url }}/data/taxon/${info.taxon.getId()}" />
<meta property="og:image" content="{{ site.url }}/images/col_square_logo.jpg" />
<meta property="og:description" content="${_description}" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:site" content="@catalogueoflife"/>
<meta name="twitter:title" content="${_title}" />
<meta name="twitter:description" content="${_description}" />
<meta name="twitter:image" content="{{ site.url }}/images/col_square_logo.jpg" />

<!--
TaxonName DRAFT Profile:
https://bioschemas.org/profiles/TaxonName/0.1-DRAFT/
https://bioschemas.org/profiles/Taxon/0.6-RELEASE/
-->
<script type="application/ld+json">
{
  "@context": [
    "https://schema.org/",
    {
      "dwc": "http://rs.tdwg.org/dwc/terms/",
      "col": "http://catalogueoflife.org/terms/"
    }
  ],
  "@id":"{{ site.url }}/data/taxon/${info.taxon.getId()}",
  "@type": "Taxon",
  "additionalType": [
    "dwc:Taxon",
    "http://rs.tdwg.org/ontology/voc/TaxonConcept#TaxonConcept"
  ],
  "identifier": [
    {
      "@type": "PropertyValue",
      "name": "dwc:taxonID",
      "propertyID": "http://rs.tdwg.org/dwc/terms/taxonID",
      "value": "${info.taxon.getId()}"
    },
    {
      "@type": "PropertyValue",
      "name": "col:ID",
      "propertyID": "http://catalogueoflife.org/terms/ID",
      "value": "${info.taxon.getId()}"
    }
  ],
  "name": "${info.taxon.label}",
  "scientificName": {
    "@type": "TaxonName",
    "name": "${info.taxon.name.scientificName!}",
    "author": "${info.taxon.name.authorship!}",
    "taxonRank": "${info.taxon.name.rank!}"
   <#if info.getPublishedInReference()??>
    ,"isBasedOn": {
      "@type": "ScholarlyArticle",
      "name": "${info.getPublishedInReference().citation!}"
    }
   </#if>
  },
  <#if info.taxon.name.rank??>
  "taxonRank": [
    "https://api.checklistbank.org/vocab/rank/${info.taxon.name.rank}",
    "${info.taxon.name.rank}"
  ],
  </#if>

<#if info.synonyms?has_content>
  "alternateName": [
     <#list info.synonyms.all() as s>
      "${s.label}"<#sep>,</#sep>
     </#list>
  ],
  "alternateScientificName": [
    <#list info.synonyms.all() as s>
    {
      "@type": "TaxonName",
      "name": "${s.name.scientificName}",
      "author": "${s.name.authorship!}",
      "taxonRank": "${s.name.rank}"
      <#if s.name.publishedInId??>
       ,"isBasedOn": {
          "@type": "ScholarlyArticle",
          "name": "${info.getReference(s.name.publishedInId).citation!}"
        }
      </#if>
    }<#sep>,</#sep>
    </#list>
  ],
</#if>

<#if info.vernacularNames?has_content>
  "dwc:vernacularName": [
  <#list info.vernacularNames as v>
    {
      "@language": "${v.language!}",
      "@value": "${v.name!}"
    }<#sep>,</#sep>
  </#list>
  ],
</#if>

<#if parent??>
  "parentTaxon": {
    "@id":"{{ site.url }}/data/taxon/${parent.id}",
    "@type": "Taxon",
    "name": "${parent.label!}",
    "scientificName": {
      "@type": "TaxonName",
      "name": "${parent.name!}",
      "author": "${parent.authorship!}",
      "taxonRank": "${parent.rank!}"
    },
    "identifier": [
      {
        "@type": "PropertyValue",
        "name": "dwc:taxonID",
        "propertyID": "http://rs.tdwg.org/dwc/terms/taxonID",
        "value": "${parent.id}"
      },
      {
        "@type": "PropertyValue",
        "name": "col:ID",
        "propertyID": "http://catalogueoflife.org/terms/ID",
        "value": "${parent.id}"
      }
    ],
    "taxonRank": [
      "http://rs.gbif.org/vocabulary/gbif/rank/${parent.rank}",
      "${parent.rank}"
    ]
  }
</#if>
}
</script>